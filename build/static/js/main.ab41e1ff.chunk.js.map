{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/phonebook_data.js","components/Person.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","search","handleChange","value","onChange","PersonForm","newName","addNewPerson","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","exported","getAll","axios","get","then","response","data","create","personObject","post","update","id","newObject","put","deletePerson","delete","Person","person","setPersons","setMessage","name","number","onClick","window","confirm","PhonebookService","setTimeout","Persons","persons","map","p","length","Notification","message","error","className","App","useState","setNewName","setNewNumber","setSearch","successMessage","setSuccessMessage","errorMessage","setErrorMessage","timeLimit","useEffect","console","log","returnedData","event","target","preventDefault","filter","alert","find","changedPerson","returnedPerson","catch","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ab41e1ff.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ search, handleChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input value={search} onChange={handleChange}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ( {newName, addNewPerson, handleNameChange, newNumber, handleNumberChange}) => {\r\n  return (\r\n    <form onSubmit={addNewPerson}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange}/>\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange}/>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = \"api/persons\"\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (personObject) => {\r\n  const request = axios.post(baseUrl, personObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst exported = { getAll, create, update, deletePerson }\r\n\r\nexport default exported","import React from 'react'\r\nimport PhonebookService from \"../services/phonebook_data\";\r\n\r\nconst Person = ({ person, setPersons, setMessage }) => {\r\n\r\n  // Define delete handle code\r\n\r\n  const handleDelete = () => {\r\n    if (window.confirm(`Delete ${person.name}?`)) {\r\n      PhonebookService.deletePerson(person.id)\r\n      // We need to call getAll() to eventually update the persons array\r\n      PhonebookService.getAll().then(data => setPersons(data))\r\n      setMessage(`Deleted ${person.name} from the server`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <tr>\r\n      <td>{person.name}</td>\r\n      <td>{person.number}</td>\r\n      <td><button onClick={handleDelete}>Delete</button></td>\r\n    </tr>\r\n  )\r\n}\r\n\r\nexport default Person","import Person from \"./Person\";\r\n\r\nconst Persons = ({ persons, search, setPersons, setMessage }) => {\r\n  // Return the data in a table format for organization\r\n  return (\r\n    <div>\r\n      <table>\r\n        <tbody>\r\n        {persons.map(p => {\r\n          // This is for filtering out people by their names\r\n          if (search.length === 0 || p.name.search(search) !== -1) {\r\n            return <Person key={p.id} person={p} setPersons={setPersons} setMessage={setMessage}/>\r\n          }\r\n          else {\r\n            return null\r\n          }\r\n        }\r\n        )\r\n        }\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons","const Notification = ({ message, error = false }) => {\r\n  if (message) {\r\n    if (error) {\r\n      return (\r\n        <div className=\"error\">\r\n          {message}\r\n        </div>\r\n      )\r\n    }\r\n    else {\r\n      return (\r\n        <div className=\"notif\">\r\n          {message}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport PhonebookService from './services/phonebook_data'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n\n  const [ newName, setNewName ] = useState('')\n\n  const [ newNumber, setNewNumber ] = useState('')\n\n  const [search, setSearch] = useState('')\n\n  const [successMessage, setSuccessMessage] = useState(null)\n\n  const [errorMessage, setErrorMessage] = useState(null)\n  \n  const timeLimit = 5000;\n\n  const hook = () => {\n    console.log(\"effect\")\n    PhonebookService.getAll()\n      .then(returnedData => setPersons(returnedData))\n  }\n\n  useEffect(hook, [])\n\n  const addNewPerson = (event) => {\n    console.log(persons)\n    // Prevent default behaviour of sending form\n    event.preventDefault()\n\n    // If you try to enter a person's name when they already exist with the exact number provided, alert message\n    if (persons.filter(person => person.name === newName && person.number === newNumber).length === 1) {\n      alert(`${newName} has already been added to the phonebook with phone number ${newNumber}`)\n    }\n\n    // Update the person's number\n    else if (persons.filter(person => person.name === newName).length === 1) {\n      if (window.confirm(`${newName} has already been added to the phonebook, replace the old number with a new one?`)) {\n        const person = persons.find(p => p.name === newName)\n        const changedPerson = {...person, number: newNumber}\n\n        PhonebookService\n          .update(person.id, changedPerson)\n          .then(returnedPerson => {\n            console.log(returnedPerson)\n            setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson))\n            setSuccessMessage(`Updated ${returnedPerson.name}'s phone number`)\n            setTimeout(() => {\n              setSuccessMessage(null)\n            }, timeLimit)\n          })\n          .catch(error => {\n            // If we can't update the person's number, set error message and timeout\n              setErrorMessage(`Information of ${person.name} has already been removed from the server`)\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, timeLimit)\n            }\n          )\n      }\n\n      // Create new person record and add it to persons array\n    } else {\n      const personObject = {name: newName, number: newNumber}\n      PhonebookService.create(personObject)\n        .then(returnedPerson => {\n          // Update the persons array\n          setPersons(persons.concat(returnedPerson))\n          // Set appropriate message and timeout\n          setSuccessMessage(`Added ${returnedPerson.name}`)\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, timeLimit)\n\n          // Reset name and number fields\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchChange = (event) => {\n    console.log(event.target.value)\n    setSearch(event.target.value)\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {/*Displays either success message or error message based on which is non empty*/}\n      {successMessage && <Notification message={successMessage}/>}\n      {/*Updating persons array happens in Person component*/}\n      {errorMessage && <Notification message={errorMessage} error={true}/>}\n\n      <Filter search={search} handleChange={handleSearchChange}/>\n      <h3> Add a new </h3>\n        <PersonForm newName={newName} addNewPerson={addNewPerson} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\n      <h2>Numbers</h2>\n      <Persons persons={persons} search={search} setPersons={setPersons} setMessage={setSuccessMessage}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}